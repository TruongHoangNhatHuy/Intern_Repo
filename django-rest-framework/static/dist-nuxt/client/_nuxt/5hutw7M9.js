import{_ as C}from"./CRaAE_wE.js";import{r as m,I as V,o as n,c as a,a as s,u as o,q as D,C as v,D as g,p as y,z as x,d as _,t as k,b as c,w as b,F as h,_ as I,J as S}from"./Cj5KKtQi.js";import{u as $}from"./CQUXvy6G.js";const M={class:"modal-dialog"},U={key:0,class:"modal-content"},q={class:"modal-body"},A=["disabled"],F=["disabled"],T={class:"modal-footer"},j={key:0,class:"text-danger mb-2"},z=["disabled"],E={key:0,class:"spinner-border",role:"status"},J={key:1},R={key:1,class:"modal-content"},W={class:"modal-body"},Y={class:"modal-footer"},G={key:0,class:"text-danger mb-2"},H=["disabled"],K={key:0,class:"spinner-border",role:"status"},O={key:1},P={__name:"LoginDialog",setup(p){const i=$(),r=m(""),l=m(""),e=m(!1),d=m(!1),w=V(()=>i.userInfo!=null);function L(){r.value="",l.value="",e.value=!1,d.value=!1}async function B(){e.value=!0,await i.authenticate(r.value,l.value)?d.value=!1:d.value=!0,e.value=!1}async function N(){e.value=!0,await i.revokeAuth()?d.value=!1:d.value=!0,e.value=!1}return(f,t)=>(n(),a("div",{class:"modal fade",tabindex:"-1",onBlur:t[4]||(t[4]=u=>L())},[s("div",M,[o(w)?(n(),a("div",R,[t[11]||(t[11]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title"},"You have logged in!"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",W,[s("span",null,[t[8]||(t[8]=_("Welcome ")),s("b",null,k(o(i).userInfo.username),1)])]),s("div",Y,[o(d)?(n(),a("div",G,t[9]||(t[9]=[s("b",null,"Failed to logout, try again!",-1)]))):x("",!0),s("button",{type:"button",class:"btn btn-primary",disabled:o(e),onClick:t[3]||(t[3]=u=>N())},[o(e)?(n(),a("span",K,t[10]||(t[10]=[s("span",{class:"visually-hidden"},"Loading...",-1)]))):(n(),a("span",O,"Logout"))],8,H)])])):(n(),a("div",U,[s("form",{onSubmit:t[2]||(t[2]=D(u=>B(),["prevent"]))},[t[7]||(t[7]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title"},"Login"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",q,[v(s("input",{class:"form-control mb-2",type:"text",placeholder:"username","onUpdate:modelValue":t[0]||(t[0]=u=>y(r)?r.value=u:null),required:"",disabled:o(e)},null,8,A),[[g,o(r)]]),v(s("input",{class:"form-control",type:"password",placeholder:"password","onUpdate:modelValue":t[1]||(t[1]=u=>y(l)?l.value=u:null),required:"",disabled:o(e)},null,8,F),[[g,o(l)]])]),s("div",T,[o(d)?(n(),a("div",j,t[5]||(t[5]=[s("b",null,"Username or password incorrect!",-1)]))):x("",!0),s("button",{type:"submit",class:"btn btn-primary",disabled:o(e)},[o(e)?(n(),a("span",E,t[6]||(t[6]=[s("span",{class:"visually-hidden"},"Loading...",-1)]))):(n(),a("span",J,"Login"))],8,z)])],32)]))])],32))}},Q={class:"navbar fixed-top bg-success"},X={class:"container"},Z={class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#loginModal"},ss={key:0},ts={key:1},es={__name:"NavBar",setup(p){const i=$();return(r,l)=>{const e=C,d=P;return n(),a(h,null,[s("nav",Q,[s("div",X,[c(e,{to:"/",class:"h2 text-decoration-none"},{default:b(()=>l[0]||(l[0]=[_("Snippets")])),_:1}),c(e,{to:"/about",class:"text-black text-decoration-none"},{default:b(()=>l[1]||(l[1]=[_("About1")])),_:1}),c(e,{to:"/about",class:"text-black text-decoration-none"},{default:b(()=>l[2]||(l[2]=[_("About2")])),_:1}),s("button",Z,[o(i).userInfo!=null?(n(),a("span",ss,k(o(i).userInfo.username),1)):(n(),a("span",ts,"Login"))])])]),c(d,{id:"loginModal"})],64)}}},os={},ns={class:"mt-5 pt-3 d-flex justify-content-center"};function as(p,i){const r=es;return n(),a(h,null,[c(r),s("div",ns,[S(p.$slots,"default")])],64)}const rs=I(os,[["render",as]]);export{rs as default};
