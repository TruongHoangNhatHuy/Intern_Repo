import{_ as f}from"./CNH9lMdp.js";import{r as u,c as o,a as e,b,u as r,p as v,q as y,o as l,s as _,v as g}from"./Cj5KKtQi.js";import{u as k,a as S}from"./CQUXvy6G.js";const h={class:"mt-2"},B=["disabled"],$={key:0,class:"spinner-border",role:"status"},V={key:1},T={__name:"add",setup(w){const d=g(),c=k(),t=u({title:"",code:"",linenos:!1,language:"",style:"vs"}),a=u(!1);async function p(){try{a.value=!0;const{data:n,status:s}=await S(`${d.public.serverUrl}/snippets/`,{method:"post",headers:{Authorization:`Bearer ${c.accessToken}`},body:JSON.stringify(t.value)},"$SRQeBk2xTX");s.value=="success"?(alert("Snippet added!"),_("/")):alert("Failed to add snippet, try again!")}catch(n){console.warn(n),alert("Error")}finally{a.value=!1}}return(n,s)=>{const m=f;return l(),o("form",{class:"h-100 w-100 m-3",onSubmit:y(p,["prevent"])},[s[3]||(s[3]=e("h1",null,"Add",-1)),b(m,{modelValue:r(t),"onUpdate:modelValue":s[0]||(s[0]=i=>v(t)?t.value=i:null),"is-readonly":!1},null,8,["modelValue"]),e("div",h,[e("button",{class:"btn btn-secondary m-1",onClick:s[1]||(s[1]=i=>n.$router.back())},"Back"),e("button",{class:"btn btn-success m-1",type:"submit",disabled:r(a)},[r(a)?(l(),o("span",$,s[2]||(s[2]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):(l(),o("span",V,"Submit"))],8,B)])],32)}}};export{T as default};
